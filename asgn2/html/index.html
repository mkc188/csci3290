<html><head><title>CSCI3290 - Assignment 2</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_t3ytwd7v5c9j-2>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-2}.lst-kix_t3ytwd7v5c9j-0>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-0,decimal) ". "}ol.lst-kix_t3ytwd7v5c9j-5.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-5 0}.lst-kix_t3ytwd7v5c9j-8>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-8,lower-roman) ". "}.lst-kix_t3ytwd7v5c9j-0>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-0}.lst-kix_t3ytwd7v5c9j-3>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-3,decimal) ". "}.lst-kix_t3ytwd7v5c9j-7>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-7,lower-latin) ". "}ol.lst-kix_t3ytwd7v5c9j-3.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-3 0}ol.lst-kix_t3ytwd7v5c9j-0{list-style-type:none}ol.lst-kix_t3ytwd7v5c9j-1{list-style-type:none}.lst-kix_t3ytwd7v5c9j-4>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-4,lower-latin) ". "}ol.lst-kix_t3ytwd7v5c9j-0.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-0 0}ol.lst-kix_t3ytwd7v5c9j-2.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-2 0}.lst-kix_t3ytwd7v5c9j-1>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-1,lower-latin) ". "}.lst-kix_t3ytwd7v5c9j-5>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-5,lower-roman) ". "}.lst-kix_t3ytwd7v5c9j-2>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-2,lower-roman) ". "}ol.lst-kix_t3ytwd7v5c9j-6.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-6 0}.lst-kix_t3ytwd7v5c9j-7>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-7}.lst-kix_t3ytwd7v5c9j-1>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-1}.lst-kix_t3ytwd7v5c9j-4>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-4}.lst-kix_t3ytwd7v5c9j-6>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-6,decimal) ". "}.lst-kix_t3ytwd7v5c9j-8>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-8}ol.lst-kix_t3ytwd7v5c9j-1.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-1 0}.lst-kix_t3ytwd7v5c9j-6>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-6}ol.lst-kix_t3ytwd7v5c9j-8.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-8 0}ol.lst-kix_t3ytwd7v5c9j-8{list-style-type:none}ol.lst-kix_t3ytwd7v5c9j-7.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-7 0}ol.lst-kix_t3ytwd7v5c9j-6{list-style-type:none}ol.lst-kix_t3ytwd7v5c9j-7{list-style-type:none}ol.lst-kix_t3ytwd7v5c9j-4{list-style-type:none}.lst-kix_t3ytwd7v5c9j-3>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-3}ol.lst-kix_t3ytwd7v5c9j-5{list-style-type:none}.lst-kix_t3ytwd7v5c9j-5>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-5}ol.lst-kix_t3ytwd7v5c9j-2{list-style-type:none}ol.lst-kix_t3ytwd7v5c9j-4.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-4 0}ol.lst-kix_t3ytwd7v5c9j-3{list-style-type:none}ol{margin:0;padding:0}.c9{line-height:1.15;padding-top:0pt;text-align:left;padding-bottom:0pt}.c11{max-width:589.5pt;background-color:#ffffff;padding:72pt 9pt 72pt 13.5pt}.c2{font-size:13pt;font-family:"Trebuchet MS";font-weight:bold}.c8{font-size:18pt;font-weight:bold}.c10{color:inherit;text-decoration:inherit}.c7{color:#1155cc;text-decoration:underline}.c1{font-size:16pt;font-family:"Trebuchet MS"}.c3{height:11pt}.c6{text-align:center}.c4{font-family:"Courier New"}.c5{font-size:10pt}.c0{direction:ltr}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c11"><h1 class="c6 c0"><a name="h.8569en2oflzn"></a><span class="c8">CSCI 3290 Computational Photography</span></h1><h1 class="c0 c6"><a name="h.ueklkatilu10"></a><span class="c8">Assignment 2 &ndash; Image Blending</span></h1><h5 class="c6 c0"><a name="h.978ic1c093wh"></a><span class="c5">by </span></h5><h5 class="c6 c0"><a name="h.978ic1c093wh"></a><span class="c5">1 Nov, 2013</span></h5><h1 class="c0"><a name="h.9ypnhmj3gcep"></a><span>Introduction</span></h1><p class="c3 c0"><span></span></p><p class="c0"><span>The primary goal of this assignment is to seamlessly blend an object or texture from a source image into a target image. The simplest method would be to just copy and paste the pixels from one image directly into the other. Unfortunately, this will create very noticeable seams, even if the backgrounds are similar. In this project, the Laplacian pyramid blending and Poisson blending will be implemented to solve this problem.</span></p><p class="c3 c0"><span></span></p><h1 class="c0"><a name="h.4ca7f94n1e3i"></a><span>Algorithm</span></h1><p class="c3 c0"><span></span></p><h2 class="c0"><a name="h.80nk0okwq237"></a><span>Laplacian Pyramid Blending</span></h2><p class="c3 c0"><span></span></p><p class="c0"><span>The implementation of Laplacian pyramid blending method is quite simple, We first create three pyramid of the input image, gaussian and laplacian. After we got the image pyramid and laplace pyramid of foreground and background. We can combine the laplacian pyramids using this formula:</span></p><p class="c3 c0"><span></span></p><p class="c0"><span class="c4">laplaceMerge{i} = gaussianMask{i}.*laplaceFore{i} + (1-gaussianMask{i}).*laplaceBack{i};</span></p><p class="c3 c0"><span class="c4"></span></p><p class="c0"><span>Start from the smallest scale of the image, for each level of laplaceMerge pyramid, we progressively upsample the smallest scale image and combine with every level of laplaceMerge pyramid. Finally, the accumulated image will be the result.</span></p><p class="c3 c0"><span></span></p><p class="c0"><span>This blending method is extremely fast. Elapsed time is just about 0.1 seconds. </span><span>One of the </span><span>advantage of Laplacian Pyramid is that it preserves the color of the source image. Another property of Laplacian Pyramid method is that it depends on the size of the </span><span>G</span><span>aussian filter. If the size of the filter is too small, a clear boundary will be between the source and the target image.</span></p><p class="c3 c0"><span></span></p><p class="c3 c0"><span></span></p><p class="c0 c9"><span class="c2">Poisson Blending</span></p><p class="c3 c0"><span></span></p><p class="c0"><span>For the every output pixels outside the mask, </span><span>we make them equal to the according pixels of target image. For the pixels which inside the mask, we calculate the gradients of each pixel for foreground and background by this formulas:</span></p><p class="c0 c3"><span></span></p><p class="c0"><span class="c4">% r = row of the image matrix, c = column of the image matrix, ch = channel of rgb image</span></p><p class="c0"><span class="c4">Laplacian = 4 * Img(r, c, ch) - Img(r+1, c, ch) - Img(r-1, c, ch) - Img(r, c+1, ch) - Img(r, c-1, ch);</span></p><p class="c3 c0"><span></span></p><p class="c0"><span>Subtract the foreground and background Laplacian, we can get matrix </span><span class="c4">B</span><span>&nbsp;of each rgb channel.</span></p><p class="c0"><span>The we solve the three channel of system of linear equations </span><span class="c4">Ax = B</span><span>.</span></p><p class="c3 c0"><span></span></p><p class="c0"><span>This implementation is very slow. Elapsed time is over 1 min, because I loop for every single pixel and excessively access matrix. Maybe I can spend more time on improving the algorithm or implement the skeleton code. </span></p><p class="c3 c0"><span></span></p><p class="c0"><span class="c1">Extra Credit</span></p><p class="c3 c0"><span class="c1"></span></p><p class="c0"><span class="c2">Failure cases</span></p><p class="c3 c0"><span></span></p><p class="c0"><span>For the testcase of notebook, the horizontal lines was disappeared. Since I didn&rsquo;t implement using mixed gradients for the forground image. Mixed gradient should work great for transparent foreground image like the text on the notebook.</span></p><p class="c3 c0"><span></span></p><h1 class="c0"><a name="h.d42a7d3lwpij"></a><span>Result</span></h1><p class="c3 c0"><span></span></p><p class="c0"><span class="c2">apple_out_pyramid</span></p><p class="c3 c0"><span></span></p><p class="c0"><img height="232" src="images/image06.png" width="232"><span>&nbsp;+ </span><img height="234" src="images/image02.png" width="234"><span>&nbsp;= </span><img height="230" src="images/image05.png" width="230"></p><p class="c3 c0"><span></span></p><p class="c3 c0"><span></span></p><p class="c3 c0"><span></span></p><p class="c0"><span class="c2">notebook_out_poisson</span></p><p class="c0"><img height="314" src="images/image11.png" width="247"><span>&nbsp;+ </span><img height="312" src="images/image08.png" width="245"><span>&nbsp;= </span><img height="309" src="images/image09.png" width="243"></p><p class="c3 c0"><span></span></p><p class="c0"><span class="c2">snow_out_poisson</span></p><p class="c3 c0"><span></span></p><p class="c0"><img height="186" src="images/image10.png" width="248"><span>+</span><img height="186" src="images/image07.png" width="248"><span>=</span><img height="188" src="images/image00.png" width="251"></p><p class="c3 c0"><span></span></p><p class="c0"><span class="c2">mona_out_poisson</span></p><p class="c0"><img height="370" src="images/image04.jpg" width="238"><span>&nbsp;+ </span><img height="370" src="images/image01.jpg" width="238"><span>&nbsp;= </span><img height="372" src="images/image03.jpg" width="239"></p><p class="c3 c0"><span></span></p><p class="c0"><span class="c1">Reference</span></p><p class="c3 c0"><span></span></p><p class="c0"><span class="c7"><a class="c10" href="http://en.wikipedia.org/wiki/Discrete_Poisson_equation">http://en.wikipedia.org/wiki/Discrete_Poisson_equation</a></span></p><p class="c3 c0"><span></span></p></body></html>
