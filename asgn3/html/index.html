<html><head><title>CSCI3290 - Assignment 3</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_t3ytwd7v5c9j-2>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-2}.lst-kix_t3ytwd7v5c9j-0>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-0,decimal) ". "}ol.lst-kix_t3ytwd7v5c9j-5.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-5 0}.lst-kix_t3ytwd7v5c9j-8>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-8,lower-roman) ". "}.lst-kix_t3ytwd7v5c9j-0>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-0}.lst-kix_t3ytwd7v5c9j-3>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-3,decimal) ". "}.lst-kix_t3ytwd7v5c9j-7>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-7,lower-latin) ". "}ol.lst-kix_t3ytwd7v5c9j-3.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-3 0}ol.lst-kix_t3ytwd7v5c9j-0{list-style-type:none}ol.lst-kix_t3ytwd7v5c9j-1{list-style-type:none}.lst-kix_t3ytwd7v5c9j-4>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-4,lower-latin) ". "}ol.lst-kix_t3ytwd7v5c9j-0.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-0 0}ol.lst-kix_t3ytwd7v5c9j-2.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-2 0}.lst-kix_t3ytwd7v5c9j-1>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-1,lower-latin) ". "}.lst-kix_t3ytwd7v5c9j-5>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-5,lower-roman) ". "}.lst-kix_t3ytwd7v5c9j-2>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-2,lower-roman) ". "}ol.lst-kix_t3ytwd7v5c9j-6.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-6 0}.lst-kix_t3ytwd7v5c9j-7>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-7}.lst-kix_t3ytwd7v5c9j-1>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-1}.lst-kix_t3ytwd7v5c9j-4>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-4}.lst-kix_t3ytwd7v5c9j-6>li:before{content:"" counter(lst-ctn-kix_t3ytwd7v5c9j-6,decimal) ". "}.lst-kix_t3ytwd7v5c9j-8>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-8}ol.lst-kix_t3ytwd7v5c9j-1.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-1 0}.lst-kix_t3ytwd7v5c9j-6>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-6}ol.lst-kix_t3ytwd7v5c9j-8.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-8 0}ol.lst-kix_t3ytwd7v5c9j-8{list-style-type:none}ol.lst-kix_t3ytwd7v5c9j-7.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-7 0}ol.lst-kix_t3ytwd7v5c9j-6{list-style-type:none}ol.lst-kix_t3ytwd7v5c9j-7{list-style-type:none}ol.lst-kix_t3ytwd7v5c9j-4{list-style-type:none}.lst-kix_t3ytwd7v5c9j-3>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-3}ol.lst-kix_t3ytwd7v5c9j-5{list-style-type:none}.lst-kix_t3ytwd7v5c9j-5>li{counter-increment:lst-ctn-kix_t3ytwd7v5c9j-5}ol.lst-kix_t3ytwd7v5c9j-2{list-style-type:none}ol.lst-kix_t3ytwd7v5c9j-4.start{counter-reset:lst-ctn-kix_t3ytwd7v5c9j-4 0}ol.lst-kix_t3ytwd7v5c9j-3{list-style-type:none}ol{margin:0;padding:0}.c7{vertical-align:top;width:196.5pt;border-style:solid;border-color:#000000;border-width:1pt;padding:5pt 5pt 5pt 5pt}.c14{line-height:1.15;padding-top:0pt;text-align:left;padding-bottom:0pt}.c10{margin-right:auto;border-collapse:collapse}.c2{line-height:1.0;padding-top:0pt;padding-bottom:0pt}.c9{font-size:13pt;font-family:"Trebuchet MS";font-weight:bold}.c12{max-width:589.5pt;background-color:#ffffff;padding:72pt 9pt 72pt 13.5pt}.c4{font-size:18pt;font-weight:bold}.c6{color:#1155cc;text-decoration:underline}.c8{font-size:16pt;font-family:"Trebuchet MS"}.c3{color:inherit;text-decoration:inherit}.c0{direction:ltr}.c1{text-align:center}.c5{height:11pt}.c13{font-family:"Courier New"}.c11{font-size:10pt}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c12"><h1 class="c0 c1"><a name="h.8569en2oflzn"></a><span class="c4">CSCI 3290 Computational Photography</span></h1><h1 class="c0 c1"><a name="h.fmqdxpt04r4d"></a><span class="c4">Assignment 3 &ndash; Image Quilting for Texture Synthesis and</span></h1><h1 class="c0 c1"><a name="h.ul6p5xtmgld3"></a><span class="c4">Transfer</span></h1><h5 class="c0 c1"><a name="h.978ic1c093wh"></a><span class="c11">by</span></h5><h5 class="c0 c1"><a name="h.978ic1c093wh"></a><span class="c11">22 Nov, 2013</span></h5><h1 class="c0"><a name="h.9ypnhmj3gcep"></a><span>Introduction</span></h1><p class="c0 c5"><span></span></p><p class="c0"><span>The primary goal of this assignment is to implement a classical texture synthesis and transfer method,</span></p><p class="c0"><span>named Image Quilting for Texture Synthesis and Transfer (SIGGRAPH 2001) by Alexei A. Efros and</span></p><p class="c0"><span>William T. Freeman. Texture synthesis is the process of creating an image of arbitrary size from a small</span></p><p class="c0"><span>sample (grass sample below). Texture Transfer means re-rendering an image in the style of another one.</span></p><p class="c0 c5"><span></span></p><h1 class="c0"><a name="h.4ca7f94n1e3i"></a><span>Algorithm</span></h1><p class="c0 c5"><span></span></p><h2 class="c0"><a name="h.6jdxp5vhlwpl"></a><span>Texture Synthesis</span></h2><p class="c0 c5"><span></span></p><p class="c0"><span>The algorithm of texture synthesis involves extracting blocks from a given sample texture and fitting them together in the final texture result image. It will match well with the already synthesized region near the block. This is determined by compute the distance between existing shared texture region and all patches in the input texture image.</span></p><p class="c0 c5"><span></span></p><p class="c0"><span>There&rsquo;s four different region. For each region, we extract that region, calculate the error by using the following formulas:</span></p><p class="c0 c5"><span></span></p><p class="c0"><span>For example,</span></p><p class="c0 c5"><span></span></p><p class="c0"><span class="c13">err</span><span class="c13">Top</span><span class="c13">&nbsp;= xcorr2(inputImg.^2, ones([szOverlap szPatch]));</span></p><p class="c0"><span class="c13">err = errTop - 2 * xcorr2(imin, shared) + sum(shared(:).^2);</span></p><p class="c0 c5"><span></span></p><p class="c0"><span>Then we find the texture with a reasonable small error and randomly pick a block paste to the output image. Since I didn&rsquo;t implement the minimum error boundary and merge the new texture patch to the existing image. There&rsquo;s will be some obvious boundary.</span></p><p class="c0 c5"><span></span></p><p class="c0 c14"><span class="c9">Texture Transfer</span></p><p class="c0 c5"><span></span></p><p class="c0"><span>We can modify the texture synthesis algorithm by consider the corresponding error of the target image. The total error terms will become:</span></p><p class="c0"><span class="c13">error = (overlap_error + previous_synthezised_error) + &alpha; * correspondence_error</span></p><p class="c0 c5"><span></span></p><p class="c0"><span>However, during the implementation, I cannot calculate the correspondence error correctly. Although I use the similar formula of calculating overlap regions, the size of my correspondence error matrix is different with the overlap_error matrix. </span></p><p class="c0 c5"><span></span></p><p class="c0"><span class="c8">Extra Credit</span></p><p class="c0 c5"><span class="c9"></span></p><p class="c0"><span class="c9">Run experiments with varying values for those parameters</span></p><p class="c0 c5"><span class="c9"></span></p><a href="#" name="d4fed6128622abe812c2f9047ad03763a82831b5"></a><a href="#" name="0"></a><table cellpadding="0" cellspacing="0" class="c10"><tbody><tr><td class="c7"><p class="c2 c0"><span>szPatch = 5; szOverlap = 4</span></p></td><td class="c7"><p class="c2 c0"><span>szPatch = 15; szOverlap = 4</span></p></td><td class="c7"><p class="c2 c0"><span>szPatch = 20; szOverlap = 4</span></p></td></tr><tr><td class="c7"><p class="c2 c0"><img height="276" src="images/image10.jpg" width="247"></p></td><td class="c7"><p class="c2 c0"><img height="276" src="images/image00.jpg" width="247"></p></td><td class="c7"><p class="c2 c0"><img height="276" src="images/image08.jpg" width="247"></p></td></tr></tbody></table><p class="c0 c5"><span class="c9"></span></p><p class="c0"><span>If the patch size is smaller, the running is a little bit higher. But the most important that small path size will distort the original texture.</span></p><p class="c0 c5"><span></span></p><a href="#" name="6595a669c5f14f36637006d989835f5864dde44c"></a><a href="#" name="1"></a><table cellpadding="0" cellspacing="0" class="c10"><tbody><tr><td class="c7"><p class="c0 c2"><span>szPatch = 10; szOverlap = 4</span></p></td><td class="c7"><p class="c2 c0"><span>szPatch = 10; szOverlap = 6</span></p></td><td class="c7"><p class="c2 c0"><span>szPatch = 10; szOverlap = 8</span></p></td></tr><tr><td class="c7"><p class="c2 c0"><img height="276" src="images/image03.jpg" width="247"></p></td><td class="c7"><p class="c2 c0"><img height="276" src="images/image11.jpg" width="247"></p></td><td class="c7"><p class="c2 c0"><img height="276" src="images/image07.jpg" width="247"></p></td></tr></tbody></table><p class="c0 c5"><span></span></p><p class="c0"><span>More overlap region give a smoother result, but the overall image is a little differ from the original one. The running time is also increase with overlap region. </span></p><p class="c0 c5"><span></span></p><p class="c0 c5"><span></span></p><h1 class="c0"><a name="h.d42a7d3lwpij"></a><span>Result</span></h1><p class="c0"><img height="192" src="images/image04.gif" width="192"><img height="392" src="images/image01.jpg" width="262"></p><p class="c0 c5"><span></span></p><p class="c0"><img height="192" src="images/image06.gif" width="192"><img height="392" src="images/image09.jpg" width="264"></p><p class="c0 c5"><span></span></p><p class="c0 c5"><span></span></p><p class="c0"><img height="96" src="images/image02.gif" width="96"><img height="392" src="images/image05.jpg" width="260"></p><p class="c0 c5"><span class="c9"></span></p><p class="c0"><span class="c8">Reference</span></p><p class="c0 c5"><span></span></p><p class="c0"><span class="c6"><a class="c3" href="http://www.mathworks.com/help/signal/ref/xcorr2.html">http://www.mathworks.com/help/signal/ref/xcorr2.html</a></span></p><p class="c0"><span class="c6"><a class="c3" href="http://www.cs.cmu.edu/afs/andrew/scs/cs/15-463/f07/proj_final/www/wwedler/">http://www.cs.cmu.edu/afs/andrew/scs/cs/15-463/f07/proj_final/www/wwedler/</a></span></p><p class="c0"><span class="c6"><a class="c3" href="http://vis.berkeley.edu/courses/cs294-69-fa11/wiki/index.php/A1-DaiBui">http://vis.berkeley.edu/courses/cs294-69-fa11/wiki/index.php/A1-DaiBui</a></span></p><p class="c0"><span class="c6"><a class="c3" href="http://graphics.cs.cmu.edu/people/efros/research/quilting/quilting.pdf">http://graphics.cs.cmu.edu/people/efros/research/quilting/quilting.pdf</a></span></p><p class="c0 c5"><span></span></p></body></html>
